<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>视频监控</title>
</head>

<body>
  <div>
    <object id="vlc" classid="clsid:9BE31822-FDAD-461B-AD51-BE1D1C159921" codebase="http://download.videolan.org/pub/videolan/vlc/last/win32/axvlc.cab">
      <param name="autostart" value="true" />
      <param name="controls" value="false" />
      <embed type="application/x-vlc-plugin" pluginspage="http://www.videolan.org" name="vlc" />
  </object>
  </div>
  <script src="./config/video-config.js?version=1528769604144" charset="utf-8"></script>
  <script type="text/javascript">
    var flag =  true
    var itemId = 0;
    function getVLC(name) {
      if (window.document[name]) {
        return window.document[name]
      }
      if (navigator.appName.indexOf("Microsoft Internet") == -1) {
        if (document.embeds && document.embeds[name])
          return document.embeds[name]
      } else {
        return document.getElementById(name)
      }
    }

    function ismute() {
      var vlc = getVLC("vlc")
      flag = vlc.audio.mute
      vlc.audio.mute = !flag
    }
    window.onload = function() {
      var locationUrl = window.location.href;
      var parent = locationUrl.split("?")[1].split("=")[1];
      var width = localStorage.getItem("width") || 400
      var height = localStorage.getItem("height") || 300
      var vlc = getVLC("vlc")
      vlc.style.width = width + 'px'
      vlc.style.height = height + 'px'
      vlc.playlist.playItem(vlc.playlist.add(videoData.videoList[parent].url))
      vlc.audio.mute = true
      flag = !vlc.audio.mute
      var time = ''
      setInterval(function(){
        if(vlc.input.state > 4 || time === vlc.input.time) {
          top.window.showError(parent, 'red')
        } else {
          top.window.showError(parent, 'green')
        }
        time = vlc.input.time
      }, 10000)
    }
  </script>
</body>

</html>
